<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wall Measure</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="static/style.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">WallMeasure</a>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Upload Images & Scale</h5>
              <form id="form">
                <div class="mb-3">
                  <label class="form-label">Front image (required)</label>
                  <input class="form-control" type="file" name="front" accept="image/*" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Top image (optional)</label>
                  <input class="form-control" type="file" name="top" accept="image/*">
                </div>

                <div class="mb-3">
                  <label class="form-label">Scale (meters per pixel)</label>
                  <input class="form-control" type="text" name="scale" placeholder="e.g. 0.005">
                </div>

                <div class="mb-2">or provide reference object</div>
                <div class="row g-2 mb-3">
                  <div class="col">
                    <input class="form-control" type="text" name="ref_real" placeholder="Real length (m)">
                  </div>
                  <div class="col">
                    <input class="form-control" type="text" name="ref_px" placeholder="Pixel length (px)">
                  </div>
                </div>

                <div class="mb-3">
                  <label class="form-label">Coverage (mÂ²/L)</label>
                  <input class="form-control" type="number" name="coverage" value="10" step="0.1">
                </div>
                <div class="mb-3">
                  <label class="form-label">Coats</label>
                  <input class="form-control" type="number" name="coats" value="2" step="0.1">
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input" type="checkbox" name="no_round" id="noRound">
                  <label class="form-check-label" for="noRound">Do not round litres up</label>
                </div>

                <div class="d-grid">
                  <button class="btn btn-primary" type="submit">Measure</button>
                </div>
              </form>
              <div class="form-check form-switch mt-3">
                <input class="form-check-input" type="checkbox" id="useAI" name="use_ai">
                <label class="form-check-label" for="useAI">Request AI summary (OpenAI API key required on server)</label>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-7">
          <div class="card shadow-sm mb-3">
            <div class="card-body">
              <h5 class="card-title">Preview</h5>
              <div class="preview-area">
                <img id="frontPreview" alt="Front preview" crossorigin="anonymous" style="max-width:100%; display:none;" />
                <canvas id="overlayCanvas" style="position:absolute; display:none;"></canvas>
              </div>
            </div>
          </div>

          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Results</h5>
              <pre id="result" class="mb-0">No measurement yet.</pre>
              <div id="aiCard" class="mt-3" style="display:none">
                <h6>AI Summary</h6>
                <div id="aiResult" class="small text-muted"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="static/main.js"></script>
  </body>
</html>
